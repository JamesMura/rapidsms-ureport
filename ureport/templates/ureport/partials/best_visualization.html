{% ifequal poll.categores.count 0 %}
<!--  TAG CLOUD -->
<div style='width:100%;clear:both;margin-bottom:30px;color:#3E576F;margin:5px;'><center style="font-size:16px;">Poll Results For</center>
    {{poll_qn}}
</div>
{%  for tag in tags%}
    <tt class="{{ tag.class }}" ><a onmouseover="$(this).next().attr('class', 'delete-tag')" onmouseout="$(this).next().attr('class', 'default')" rel="tag" class="tag_link" href="javascript:void(0)"> {{ tag.tag }}</a><span class="default" onmouseover="$(this).attr('class', 'delete-tag-hover')" onmouseout="$(this).attr('class', 'default')" title="remove {{ tag.tag }}" onclick="add_tag('{{ tag.tag }}',tag_poll_pk)"></span></tt>
{%  endfor %}
<p><a onclick="load_excluded_tags()" href="javascript:void(0)">edit excluded tags</a> </p>

<!-- MESSAGE FEED -->
<div class="messagefeed">
    <span style="font-weight:bold;margin-bottom:1px">{{ poll.question }}</span>
    <table style="width:100%">
        {% for r in responses %}
            <tr class="row_{% cycle 'reg' 'alt' %}">
                <td>{{ r.message.text }}</td>
                <td style="font-size:8px;white-space:nowrap">{{ r.message.date|date:"m/d/Y H:i" }}</td>
            </tr>
        {% endfor %}
    </table>
</div>
<script language="javascript">
    window.setTimeout(function() {
        $('.messagefeed').load('{% url ureport.views.message_feed %}?pks=+{{ poll.pk }}');
    },10000);
</script>
{% else %}
<!-- PIE CHART -->
<script type="text/javascript">
    var opts = {
        chart: {
            renderTo: 'chart',
            margin: [10, 10, 50, 50]
        },
        title: {
            text: 'Poll Results For'
        },
        plotArea: {
            shadow: true,
            borderWidth: 30,
            backgroundColor: null
        },
        tooltip: {
            formatter: function() {
                return '<b>' + this.point.name + '</b>: ' + this.y + ' %';
            }
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    formatter: function() {
                        //if (this.y > 5) return this.point.name;
                    },
                    color: 'white',
                    style: {
                        font: '13px Trebuchet MS, Verdana, sans-serif'
                    }
                }
            }
        },
        legend: {
            layout: 'horizontal',
            style: {
                left: 'auto',
                bottom: 'auto',
                right: '10px',
                top: '500px'
            }
        },
        credits:false,
        subtitle: {
            text: 'test'
        },
        series: [
            {
                type: 'pie',
                name: 'Poll Results',
                data: []
            }
        ]
    }
    function plot_pie(data) {
        var chart;

        opts.series[0].data = data['data'];
        opts.subtitle.text = data['poll_names'];
        opts.series[0].data[0] = {'name':data['data'][0][0],'y':data['data'][0][1],sliced: true,selected: true};
        chart = new Highcharts.Chart(opts);


    }


</script>
<div style="width:100%;height:600px;" id="chart">
</div>


<!-- MAP -->
<div id="map" >
</div>
<script language="javascript">
function addlayer(data)
{
    map.addOverlay(value);
}
</script>
{% endifequal %}