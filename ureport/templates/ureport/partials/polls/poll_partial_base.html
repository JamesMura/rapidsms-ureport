{% extends "generic/partials/partial_base.html" %}
{% block list_wrapper %}
    <script type="text/javascript">
        function deleteResponse(link, url) {
            if (confirm("Are you sure you want to remove this response from the poll?")) {
                $.post(url, function(data) {
                    $(link).parents("tr").remove();
                }); 
            }
        }

        function cancelResponse(link, url) {
            $(link).parents("tr").load(url);
        }

        function saveResponse(link, url) {
            form = $(link).parents("form");
            form_data = form.serializeArray();
            $(link).parents("tr").load(url, form_data);
        }

        function editResponse(link, url) {
            $(link).parents("tr").load(url);
        }
    </script>
    {{ block.super }}
{% endblock %}
{% block partial_base_content %}
    <div class="buttons">
        <a href="{% url poll.views.responses_as_csv object_list.0.poll.pk %}">
            <img src="{{ MEDIA_URL }}poll/icons/silk/table_save.png" alt=""/> Export
        </a>
    </div>
    {% for response in object_list %}

        <tr class="row_{% cycle 'reg' 'alt' %}">
        <td><input type="checkbox" id="{{response.pk}}" name="results" value="{{ response.pk }}"></td>
            {% include partial_row %}
        </tr>
    {% endfor %}
{% endblock %}